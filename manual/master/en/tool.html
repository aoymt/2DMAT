
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Related Tools &#8212; 2DMAT 1.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/haiku.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="(For developers) User-defined algorithm and solver" href="customize/index.html" />
    <link rel="prev" title="sim-trhepd-rheed solver" href="solver/sim-trhepd-rheed.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="index.html">
          <span>2DMAT 1.0.1 documentation</span></a></h1>
        <h2 class="heading"><span>Related Tools</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="solver/sim-trhepd-rheed.html"><code class="docutils literal notranslate"><span class="pre">sim-trhepd-rheed</span></code> solver</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="customize/index.html">(For developers) User-defined algorithm and solver</a>&#160;&#160;»
        </p>

      </div>
      <div class="content" role="main">
        
        
  <section id="related-tools">
<h1>Related Tools<a class="headerlink" href="#related-tools" title="Permalink to this headline">¶</a></h1>
<section id="to-dft-py">
<h2><code class="docutils literal notranslate"><span class="pre">to_dft.py</span></code><a class="headerlink" href="#to-dft-py" title="Permalink to this headline">¶</a></h2>
<p>This tool generates input data for <a class="reference external" href="https://www.quantum-espresso.org/">Quantum Espresso (QE)</a> , a first-principles electronic structure calculation software, from the atomic structures of (001) and (111) surface models of systems with Si isotetrahedral bond networks. This is used to validate the obtained structure and to obtain microscopic information such as the electronic state. In order to eliminate the influence of dangling bond-derived electrons from the opposite surface of interest, we use a technique called hydrogen termination, in which a hydrogen atom is placed at the position of the lowest dangling bond.</p>
<section id="prerequisites">
<h3>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Python3 &gt;= 3.6</p></li>
</ul>
<p>The following packages are required:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://wiki.fysik.dtu.dk/ase">Atomic Simulation Environment(ASE)</a> (&gt;= 3.21.1)</p></li>
<li><p>Numpy</p></li>
<li><p>Scipy</p></li>
<li><p>Matplotlib</p></li>
</ul>
</section>
<section id="overview-of-this-tool">
<h3>Overview of this tool<a class="headerlink" href="#overview-of-this-tool" title="Permalink to this headline">¶</a></h3>
<p>The input file including the information such as the name of the structure file (XYZ format) and the lattice vector information to represent the two-dimensional periodic structure is read in, and the coordinates of the lowest layer and the next layer of atoms are extracted from the obtained coordinate data.
The bottom layer atoms are removed, and H atoms are placed at the corresponding positions to create a model with the distance to the next layer atoms adjusted to a tetrahedral structure (for example, the distance to a silane molecule in the case of Si).
The hydrogen-terminated model is saved in XYZ format, and a cif file and an input file for Quantum Espresso (QE) are also created.
If you have QE installed, you can also run the calculation as is.</p>
</section>
<section id="tutorial">
<h3>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p>Prepare an XYZ file for reference.</p></li>
</ol>
<p>In the following, we will use the file <code class="docutils literal notranslate"><span class="pre">surf_bulk_new111.xyz</span></code> in the folder <code class="docutils literal notranslate"><span class="pre">tool/todft/sample/111</span></code>. The contents of the file are as follows.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">12</span>
 <span class="n">surf</span><span class="o">.</span><span class="n">txt</span>             <span class="o">/</span> <span class="n">bulk</span><span class="o">.</span><span class="n">txt</span>
 <span class="n">Si</span>    <span class="mf">1.219476</span>    <span class="mf">0.000000</span>    <span class="mf">4.264930</span>
 <span class="n">Si</span>    <span class="mf">6.459844</span>    <span class="mf">0.000000</span>    <span class="mf">4.987850</span>
 <span class="n">Si</span>    <span class="mf">1.800417</span>    <span class="mf">1.919830</span>    <span class="mf">3.404650</span>
 <span class="n">Si</span>    <span class="mf">5.878903</span>    <span class="mf">1.919830</span>    <span class="mf">3.404650</span>
 <span class="n">Si</span>    <span class="mf">3.839660</span>    <span class="mf">1.919830</span>    <span class="mf">2.155740</span>
 <span class="n">Si</span>    <span class="mf">0.000000</span>    <span class="mf">1.919830</span>    <span class="mf">1.900440</span>
 <span class="n">Si</span>    <span class="mf">3.839660</span>    <span class="mf">0.000000</span>    <span class="mf">0.743910</span>
 <span class="n">Si</span>    <span class="mf">0.000000</span>    <span class="mf">0.000000</span>    <span class="mf">0.597210</span>
 <span class="n">Si</span>    <span class="mf">1.919830</span>    <span class="mf">0.000000</span>   <span class="o">-</span><span class="mf">0.678750</span>
 <span class="n">Si</span>    <span class="mf">5.759490</span>    <span class="mf">0.000000</span>   <span class="o">-</span><span class="mf">0.678750</span>
 <span class="n">Si</span>    <span class="mf">1.919830</span>    <span class="mf">1.919830</span>   <span class="o">-</span><span class="mf">2.036250</span>
 <span class="n">Si</span>    <span class="mf">5.759490</span>    <span class="mf">1.919830</span>   <span class="o">-</span><span class="mf">2.036250</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Next, create an input file for setting the various parameters.</p></li>
</ol>
<p>The file format of the input file is <code class="docutils literal notranslate"><span class="pre">toml</span></code>. The following section describes the contents of the input file using <code class="docutils literal notranslate"><span class="pre">input.toml</span></code> in the <code class="docutils literal notranslate"><span class="pre">tool/todft/sample/111</span></code> folder. The contents of the file are as follows.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">Main</span><span class="p">]</span>
<span class="n">input_xyz_file</span> <span class="o">=</span> <span class="s2">&quot;surf_bulk_new111.xyz&quot;</span>
<span class="n">output_file_head</span> <span class="o">=</span> <span class="s2">&quot;surf_bulk_new111_ext&quot;</span>
<span class="p">[</span><span class="n">Main</span><span class="o">.</span><span class="n">param</span><span class="p">]</span>
<span class="n">z_margin</span> <span class="o">=</span> <span class="mf">0.001</span>
<span class="n">slab_margin</span> <span class="o">=</span> <span class="mf">10.0</span>
<span class="n">r_SiH</span> <span class="o">=</span> <span class="mf">1.48</span> <span class="c1">#angstrom</span>
<span class="n">theta</span> <span class="o">=</span> <span class="mf">109.5</span> <span class="c1">#H-Si-H angle in degree</span>
<span class="p">[</span><span class="n">Main</span><span class="o">.</span><span class="n">lattice</span><span class="p">]</span>
<span class="n">unit_vec</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">7.67932</span><span class="p">,</span> <span class="mf">0.00000</span><span class="p">,</span> <span class="mf">0.00000</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.00000</span><span class="p">,</span> <span class="mf">3.83966</span><span class="p">,</span> <span class="mf">0.00000</span><span class="p">]]</span>
<span class="p">[</span><span class="n">ASE</span><span class="p">]</span>
<span class="n">solver_name</span> <span class="o">=</span> <span class="s2">&quot;qe&quot;</span>
<span class="n">kpts</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>        <span class="c1"># sampling k points (Monkhorst-Pack grid)</span>
<span class="n">command</span> <span class="o">=</span> <span class="s2">&quot;mpirun -np 4 ./pw.x -in espresso.pwi &gt; espresso.pwo&quot;</span>
<span class="p">[</span><span class="n">Solver</span><span class="p">]</span>
<span class="p">[</span><span class="n">Solver</span><span class="o">.</span><span class="n">control</span><span class="p">]</span>
<span class="n">calculation</span><span class="o">=</span><span class="s1">&#39;bands&#39;</span> <span class="c1"># &#39;scf&#39;,&#39;realx&#39;,&#39;bands&#39;,...</span>
<span class="n">pseudo_dir</span><span class="o">=</span><span class="s1">&#39;./&#39;</span>     <span class="c1"># Pseudopotential directory</span>
<span class="p">[</span><span class="n">Solver</span><span class="o">.</span><span class="n">system</span><span class="p">]</span>
<span class="n">ecutwfc</span> <span class="o">=</span> <span class="mf">20.0</span>        <span class="c1"># Cut-off energy in Ry</span>
<span class="n">nbands</span><span class="o">=</span><span class="mi">33</span>           <span class="c1"># # of bands (only used in band structure calc</span>
<span class="p">[</span><span class="n">Solver</span><span class="o">.</span><span class="n">pseudo</span><span class="p">]</span>
<span class="n">Si</span> <span class="o">=</span> <span class="s1">&#39;Si.pbe-mt_fhi.UPF&#39;</span>
<span class="n">H</span> <span class="o">=</span> <span class="s1">&#39;H.pbe-mt_fhi.UPF&#39;</span>
</pre></div>
</div>
<p>The input file consists of three sections: <code class="docutils literal notranslate"><span class="pre">Main</span></code>, <code class="docutils literal notranslate"><span class="pre">ASE</span></code>, and <code class="docutils literal notranslate"><span class="pre">Solver</span></code>.
Below is a brief description of the variables for each section.</p>
<section id="main-section">
<h4><code class="docutils literal notranslate"><span class="pre">Main</span></code> section<a class="headerlink" href="#main-section" title="Permalink to this headline">¶</a></h4>
<p>This section contains settings related to the parameters required for hydrogen termination.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">input_xyz_file</span></code></p>
<p>Format: string</p>
<p>Description: Name of the xyz file to input</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">output_file_head</span></code></p>
<p>Format: string</p>
<p>Description: Header for output files (xyz and cif files)</p>
</li>
</ul>
</section>
<section id="main-param-section">
<h4><code class="docutils literal notranslate"><span class="pre">Main.Param</span></code> section<a class="headerlink" href="#main-param-section" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">z_margin</span></code></p>
<p>Format: float</p>
<p>Description: Margin used to extract the lowest and second-to-last atoms. For example, if the z-coordinate of the atom in the bottom layer is <code class="docutils literal notranslate"><span class="pre">z_min</span></code>, the atoms in <code class="docutils literal notranslate"><span class="pre">z_min</span> <span class="pre">-</span> <span class="pre">z_margin</span> <span class="pre">&lt;=</span> <span class="pre">z</span> <span class="pre">&lt;=</span> <span class="pre">z_min</span> <span class="pre">+</span> <span class="pre">z_margin</span></code> will be extracted.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">slab_margin</span></code></p>
<p>Format: float</p>
<p>Description: Margin for tuning the size of the slab. If the z-coordinates of the atoms in the bottom and top layers are <code class="docutils literal notranslate"><span class="pre">z_min</span></code> , <code class="docutils literal notranslate"><span class="pre">z_max</span></code>, then the slab size is given by <code class="docutils literal notranslate"><span class="pre">z_max-z_min+slab_margin</span></code>.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">r_SiH</span></code></p>
<p>Format: float</p>
<p>Description: The distance (in <span class="math notranslate nohighlight">\(\mathrm{\mathring{A}}\)</span>) between a vertex (e.g. Si) and H of a tetrahedral structure.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">theta</span></code></p>
<p>Format: float</p>
<p>Description: The angle between the vertex and H of the tetrahedral structure (e.g. Si-H-Si).</p>
</li>
</ul>
</section>
<section id="main-lattice-section">
<h4><code class="docutils literal notranslate"><span class="pre">Main.lattice</span></code> section<a class="headerlink" href="#main-lattice-section" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">unit_vec</span></code></p>
<p>Format: list</p>
<p>Description: Specify a unit vector that forms a 2D plane (ex. <code class="docutils literal notranslate"><span class="pre">unit_vec</span> <span class="pre">=</span> <span class="pre">[[7.67932,</span> <span class="pre">0.00000,</span> <span class="pre">0.00000],</span> <span class="pre">[0.00000,</span> <span class="pre">3.83966,</span> <span class="pre">0.00000]]</span></code>).</p>
</li>
</ul>
</section>
<section id="ase-section">
<h4><code class="docutils literal notranslate"><span class="pre">ASE</span></code> section<a class="headerlink" href="#ase-section" title="Permalink to this headline">¶</a></h4>
<p>This section specifies parameters related to <code class="docutils literal notranslate"><span class="pre">ASE</span></code>.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">solver_name</span></code></p>
<p>Format: string</p>
<p>Description: The name of the solver. Currently, only <code class="docutils literal notranslate"><span class="pre">qe</span></code> is given.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">kpts</span></code></p>
<p>Format: list</p>
<p>Description: Specify the k-points to be sampled (Monkhorst-Pack grid).</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">command</span></code></p>
<p>Format: string</p>
<p>Description: Set the command used to run the solver.</p>
</li>
</ul>
</section>
<section id="solver-section">
<h4><code class="docutils literal notranslate"><span class="pre">Solver</span></code> section<a class="headerlink" href="#solver-section" title="Permalink to this headline">¶</a></h4>
<p>In this section, parameters related to <code class="docutils literal notranslate"><span class="pre">Solver</span></code> are specified.
You will need to specify this if you want to perform first-principles calculations directly using ASE.
Basically, the configuration is the same as the one specified in the input file of each solver.
For example, in the case of QE, <code class="docutils literal notranslate"><span class="pre">Solver.control</span></code> contains the parameters to be set in the <code class="docutils literal notranslate"><span class="pre">control</span></code> section of QE.</p>
<ol class="arabic simple" start="3">
<li><p>Execute the following command.</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="n">to_dft</span><span class="o">.</span><span class="n">py</span> <span class="nb">input</span><span class="o">.</span><span class="n">toml</span>
</pre></div>
</div>
<p>After finishing calculations, the following files are generated:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">surf_bulk_new111_ext.xyz</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">surf_bulk_new111_ext.cif</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">espresso.pwi</span></code></p></li>
</ul>
<p>If the path to the QE and pseudopotential is set in the input file, the first-principle calculation will be performed as is. If not, the ab initio calculation will not be performed and you will get the message <code class="docutils literal notranslate"><span class="pre">Calculation</span> <span class="pre">of</span> <span class="pre">get_potential_energy</span> <span class="pre">is</span> <span class="pre">not</span> <span class="pre">normally</span> <span class="pre">finished.</span></code> at the end, but the above file will still be output.</p>
<p>The following is a description of the output file.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">surf_bulk_new111_ext.xyz</span></code></p></li>
</ul>
<p>The output is the result of the replacement of the lowest level atom with H and the addition of H to form a tetrahedral structure.
The actual output is as follows.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">14</span>
<span class="n">Lattice</span><span class="o">=</span><span class="s2">&quot;7.67932 0.0 0.0  0.0 3.83966 0.0  0.0 0.0 17.0241&quot;</span> <span class="n">Properties</span><span class="o">=</span><span class="n">species</span><span class="p">:</span><span class="n">S</span><span class="p">:</span><span class="mi">1</span><span class="p">:</span><span class="n">pos</span><span class="p">:</span><span class="n">R</span><span class="p">:</span><span class="mi">3</span> <span class="n">pbc</span><span class="o">=</span><span class="s2">&quot;T T T&quot;</span>
<span class="n">Si</span>  <span class="mf">1.219476</span>  <span class="mf">0.000000</span>  <span class="mf">4.264930</span>
<span class="n">Si</span>  <span class="mf">6.459844</span>  <span class="mf">0.000000</span>  <span class="mf">4.987850</span>
<span class="n">Si</span>  <span class="mf">1.800417</span>  <span class="mf">1.919830</span>  <span class="mf">3.404650</span>
<span class="n">Si</span>  <span class="mf">5.878903</span>  <span class="mf">1.919830</span>  <span class="mf">3.404650</span>
<span class="n">Si</span>  <span class="mf">3.839660</span>  <span class="mf">1.919830</span>  <span class="mf">2.155740</span>
<span class="n">Si</span>  <span class="mf">0.000000</span>  <span class="mf">1.919830</span>  <span class="mf">1.900440</span>
<span class="n">Si</span>  <span class="mf">3.839660</span>  <span class="mf">0.000000</span>  <span class="mf">0.743910</span>
<span class="n">Si</span>  <span class="mf">0.000000</span>  <span class="mf">0.000000</span>  <span class="mf">0.597210</span>
<span class="n">Si</span>  <span class="mf">1.919830</span>  <span class="mf">0.000000</span>  <span class="o">-</span><span class="mf">0.678750</span>
<span class="n">Si</span>  <span class="mf">5.759490</span>  <span class="mf">0.000000</span>  <span class="o">-</span><span class="mf">0.678750</span>
<span class="n">H</span>  <span class="mf">1.919830</span>  <span class="o">-</span><span class="mf">1.208630</span>  <span class="o">-</span><span class="mf">1.532925</span>
<span class="n">H</span>  <span class="mf">1.919830</span>  <span class="mf">1.208630</span>  <span class="o">-</span><span class="mf">1.532925</span>
<span class="n">H</span>  <span class="mf">5.759490</span>  <span class="o">-</span><span class="mf">1.208630</span>  <span class="o">-</span><span class="mf">1.532925</span>
<span class="n">H</span>  <span class="mf">5.759490</span>  <span class="mf">1.208630</span>  <span class="o">-</span><span class="mf">1.532925</span>
</pre></div>
</div>
<p>This file can be read by appropriate visualization software as ordinary XYZFormat coordinate data, but the lattice vector information of the periodic structure is written in the place where comments are usually written. You can also copy the data of “element name + 3D coordinate” from the third line of the output file to the input file of QE.</p>
<p><code class="docutils literal notranslate"><span class="pre">espresso.pwi</span></code> is the input file for QE’s scf calculation, and structural optimization and band calculation can be done by modifying this file accordingly. For details, please refer to the <a class="reference external" href="https://www.quantum-espresso.org/Doc/INPUT_PW.html">QE online manual</a> .</p>
</section>
</section>
</section>
</section>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="solver/sim-trhepd-rheed.html"><code class="docutils literal notranslate"><span class="pre">sim-trhepd-rheed</span></code> solver</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="customize/index.html">(For developers) User-defined algorithm and solver</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Institute for Solid State Physics, University of Tokyo.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.0.2.
    </div>
  </body>
</html>